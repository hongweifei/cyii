(()=>{"use strict";var t={327:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EUVElement=void 0;class n{constructor(t){if(!t)throw new Error("element is null");this.domElement=t,this.tagName=t.tagName,this.tempDisplay=t.style.display,this.innerHTML=t.innerHTML,this.nodeTextContentMap=new Map;for(const e of t.childNodes)e.nodeType===Node.TEXT_NODE&&e.textContent&&this.nodeTextContentMap.set(e,e.textContent);this.parentElement=null,this.children=new Array(this.domElement.children.length);for(let t=0;t<this.domElement.children.length;t++){const e=this.domElement.children[t];this.children[t]=new n(e)}}getNodeTextContent(t){return this.nodeTextContentMap.get(t)}}e.EUVElement=n},132:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EUV=void 0;const o=n(327);let i=null;e.EUV=class{constructor(t={mounted:()=>{},data:{},computed:{},methods:{},directives:{}}){if("function"!=typeof t.mounted)throw new Error("mounted must be a function");this.mounted=t.mounted;const e=this;this.init=!1,this.$refs={},this.computed=t.computed,this.methods={},this.directiveMap=new Map;for(let e in t.directives){if(t.directives[e].mounted&&"function"!=typeof t.directives[e].mounted)throw new Error(`directives[${e}].mounted is not a function`);this.directiveMap.set({name:e,multi:!1},t.directives[e])}this.dataElementMapping=new Map;const n=this.dataElementMapping;for(const e in t.data)this.dataElementMapping.set(e,new Set);const r=(t,s)=>{const a={};for(const e in s){const n=void 0===t?e:t;Array.isArray(s[e])?(a[e]=r(n,s[e]),a[e][Symbol.iterator]=function*(){for(let t=0;t<Object.keys(a[e]).length;t++)yield a[e][t]}):"object"==typeof s[e]?a[e]=r(n,s[e]):a[e]=s[e]}return((t,r)=>{if(!r)throw new Error("被代理对象不能为空值");return new Proxy(r,{get(e,r){var s;if(i&&i instanceof o.EUVElement){const e=void 0===t?r:t;null===(s=n.get(e))||void 0===s||s.add(i)}return e[r]},set(o,i,r){const s=o[i];if(s===r)return!1;o[i]=r,console.log(`[${i.toString()}]set`,s,"=>",r);const a=void 0===t?i:t,d=n.get(a);if(!d)return!0;for(const t of d)e.renderEUVElement(t);return!0}})})(t,a)};this.data=r(void 0,t.data);for(const e in t.methods)Object.defineProperty(this.methods,e,{get:()=>t.methods[e],set(n){if("function"!=typeof n)throw new Error("method must be a function");t.methods[e]=n}});this.addDirective("show",{updated(t,n,o){const i=e.runExpressionCode(o,n.value);t.style.display=i?o.tempDisplay?o.tempDisplay:"block":"none"}}),this.addDirective({name:"bind:",aliasName:":",multi:!0},{mounted(t,n,o){if(void 0===e.data[n.value]||null===e.data[n.value])return;const i=n.name.split(":")[1],r=e.runExpressionCode(o,n.value);t.setAttribute(i,r)}});const s=new MutationObserver((t=>{for(const e of t){const t=e.target,n="e-model:"+e.attributeName,o=t.getAttribute(n);if(!o)continue;const i=t.getAttribute(e.attributeName);this.runExpressionCode(null,o,"set",i)}}));this.addDirective({name:"model:",multi:!0},{mounted(t,n,o){const i=e.runExpressionCode(o,n.value),r=n.name.split(":")[1];t.setAttribute(r,i),t[r]=i,s.observe(t,{attributes:!0});const a=()=>{const o=t[r];e.runExpressionCode(null,n.value,"set",o)};t.addEventListener("change",a),t.addEventListener("input",a)},updated(t,n,o){const i=e.runExpressionCode(o,n.value);if(null==i)return;const r=n.name.split(":")[1];t.setAttribute(r,i),t[r]=i}}),this.addDirective({name:"e-on:",aliasName:"@",multi:!0},{mounted(t,n){let o=n.name.split(":")[1];if(o||(o=n.name.split("@")[1]),!o)return;const i=n.value;t.addEventListener(o,(t=>{e.methods[i].bind(e)(t)}))}}),t.elementSelector&&this.mount(t.elementSelector)}mount(t){if(!t||"string"!=typeof t)return;if(this.mountedElement=document.querySelector(t),!this.mountedElement)throw new Error("elementSelector is not valid");this.mountedElement.setAttribute("data-e-app","");const e=new o.EUVElement(this.mountedElement),n=t=>{for(const e of t.children)e.parentElement=t,n(e)};n(e);const i=t=>{for(const e of t.children)this.renderEUVElement(e),i(e)};i(e),this.init=!0;const r=t=>{for(const e of t.children){r(e);const t=e.domElement,n=t.getAttribute("ref");n&&(this.$refs[n]=new Proxy(t,{get:(t,e)=>t[e],set:(t,e,n)=>{t[e]=n;if(null!=t.getAttribute(e)){const o="e-model:"+e,i=t.getAttribute(o);i&&(this.runExpressionCode(null,i,"set",n),t.setAttribute(e,n))}return!0}}),t.removeAttribute("ref"))}};r(e);const s=t=>{for(const e of t.children){const t=e.domElement;for(const[n,o]of this.directiveMap)if(o.mounted)if(n.multi)for(const i of t.attributes){if(void 0===i.value||null===i.value)continue;if(n.aliasName&&!i.name.startsWith(n.name)&&!i.name.startsWith(n.aliasName))continue;if(!n.aliasName&&!i.name.startsWith(n.name))continue;const[r,s]=[i.name.split(n.name)[1],n.aliasName?i.name.split(n.aliasName)[1]:void 0];(r||s)&&o.mounted(t,i,e)}else{console.log(n,t);const[i,r]=[t.getAttributeNode(n.name),n.aliasName?t.getAttributeNode(n.aliasName):void 0];i&&void 0!==i.value&&null!==i.value?o.mounted(t,i,e):r&&void 0!==r.value&&null!==r.value&&o.mounted(t,r,e)}s(e)}};s(e),this.mounted&&this.mounted.bind(this)()}addDirective(t,e){if(!t)throw new Error("name must be a string or object");if("string"!=typeof t){if(!t.name)throw new Error(`name is ${t.name}`);t.name.startsWith("e-")||(t.name="e-"+t.name),void 0!==t.multi&&null!==t.multi||(t.multi=!1),this.directiveMap.set(t,e)}else{t.startsWith("e-")||(t="e-"+t);const n={name:t,multi:!1};this.directiveMap.set(n,e)}}runExpressionCode(t,e,n="get",o=void 0){i=t;const r=(t=>{const e=t=>{if(t.startsWith("."))return t;if(isNaN(parseInt(t))){const[e,...n]=t.split(".");if(void 0!==this.data[e]&&null!==this.data[e])return"this.data."+t;if(this.computed[e])return`this.computed.${e}.bind(this)()`+(n&&0!==n.length?`.${n.join(".")}`:"")}return t};if(!t)return"";if(t.includes("[")){const n=(t=>{const e=t=>{const n=t.indexOf("[");if(-1===n)return;const o=t.substring(n+1);if(!o.includes("]"))throw new Error(`"${t}"格式错误，缺少“]”`);let i=1;for(let t=0;t<o.length;t++){const n=o[t];if("["===n?i++:"]"===n&&i--,0===i){let n=[o.substring(0,t)];const i=n[0].indexOf("[");if(-1!==i){const t=e(n[0]);n.push(...t),n[0]=n[0].substring(0,i)}const r=o.substring(t+1),s=e(r);return s?[...new Set(n.concat(s))]:[...new Set(n)]}}if(0!==i)throw new Error(`"${t}"格式错误，缺少${i}个“]”`)};return e(t)})(t);for(const o of n){const n=e(o),i=new RegExp(`${o}`,"g");t=t.replace(i,n)}const o=t.substring(0,t.indexOf("[")),i=e(o);return t.replace(o,i)}return e(t)})(e),s=new Function(`\n            ${"get"===n||"GET"===n?`return (${r});`:"set"===n||"SET"===n?`(${r}) = \`${o}\`;`:""}\n        `).bind(this)();return i=null,"object"==typeof s?JSON.stringify(s):s}renderEUVElement(t){if(!t)return;if(!(t instanceof o.EUVElement))return void console.error("render element is not EUVElement",t);const e=t.domElement;for(const n of e.childNodes){if(n.nodeType!==Node.TEXT_NODE)continue;const e=t.getNodeTextContent(n);e&&(n.textContent=e)}((t,e)=>{function n(t){const n=t.textContent;if(!n)return;const o=function*(t){let e,n,o=t;for(;-1!==(e=o.indexOf("{{"))&&(n=o.indexOf("}}",e),-1!==n);){const t=o.substring(e+2,n).trim(),i=n+2;yield{beforeCode:o.substring(0,e),code:t},o=o.substring(i)}}(n);let{value:i,done:r}=o.next();for(r||(t.textContent="");!r&&i;){const n=i.code,s=e(n);t.textContent+=i.beforeCode+s,({value:i,done:r}=o.next())}}for(const e of t.childNodes)e.nodeType===Node.TEXT_NODE&&n(e)})(e,(e=>this.runExpressionCode(t,e)));for(const[n,o]of this.directiveMap)if(o.updated){if(!n.multi){const[i,r]=[e.getAttributeNode(n.name),n.aliasName?e.getAttributeNode(n.aliasName):void 0];if(!i&&!r)continue;i&&void 0!==i.value&&null!==i.value?o.updated(e,i,t):r&&void 0!==r.value&&null!==r.value&&o.updated(e,r,t)}for(const i of e.attributes)i.name.startsWith(n.name)&&(n.aliasName&&!i.name.startsWith(n.aliasName)||o.updated&&o.updated.bind(this)(e,i,t))}return t.domElement=e,t.domElement}}},156:function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,i)}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||o(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});const r=n(132);i(n(132),e),e.default=r.EUV}},e={},n=function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}(156),o=self;for(var i in n)o[i]=n[i];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();